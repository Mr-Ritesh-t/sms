{
  "entities": {
    "Student": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Student",
      "type": "object",
      "description": "Represents a student in the school management system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Student entity."
        },
        "firstName": {
          "type": "string",
          "description": "The first name of the student."
        },
        "lastName": {
          "type": "string",
          "description": "The last name of the student."
        },
        "email": {
          "type": "string",
          "description": "The email address of the student.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "The phone number of the student."
        },
        "enrollmentDate": {
          "type": "string",
          "description": "The date the student was enrolled.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email",
        "enrollmentDate"
      ]
    },
    "Teacher": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Teacher",
      "type": "object",
      "description": "Represents a teacher in the school management system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Teacher entity."
        },
        "firstName": {
          "type": "string",
          "description": "The first name of the teacher."
        },
        "lastName": {
          "type": "string",
          "description": "The last name of the teacher."
        },
        "email": {
          "type": "string",
          "description": "The email address of the teacher.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "The phone number of the teacher."
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email"
      ]
    },
    "Course": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Course",
      "type": "object",
      "description": "Represents a course in the school management system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Course entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the course."
        },
        "description": {
          "type": "string",
          "description": "A description of the course."
        },
        "schedule": {
          "type": "string",
          "description": "The schedule of the course."
        },
        "teacherId": {
          "type": "string",
          "description": "Reference to Teacher. (Relationship: Teacher 1:N Course)"
        }
      },
      "required": [
        "id",
        "name",
        "description",
        "schedule",
        "teacherId"
      ]
    },
    "Grade": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Grade",
      "type": "object",
      "description": "Represents a grade for a student in a course.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Grade entity."
        },
        "studentId": {
          "type": "string",
          "description": "Reference to Student. (Relationship: Student 1:N Grade)"
        },
        "courseId": {
          "type": "string",
          "description": "Reference to Course. (Relationship: Course 1:N Grade)"
        },
        "grade": {
          "type": "number",
          "description": "The grade received by the student."
        },
        "submissionDate": {
          "type": "string",
          "description": "The date the grade was submitted.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "studentId",
        "courseId",
        "grade",
        "submissionDate"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "user",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Collection to store user profile information.  This is the root private data. Users can only access their own documents.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user, obtained from Firebase Authentication."
            }
          ]
        }
      },
      {
        "path": "/students/{studentId}",
        "definition": {
          "entityName": "student",
          "schema": {
            "$ref": "#/backend/entities/Student"
          },
          "description": "Collection to store student profiles.",
          "params": [
            {
              "name": "studentId",
              "description": "The unique identifier for the student."
            }
          ]
        }
      },
      {
        "path": "/teachers/{teacherId}",
        "definition": {
          "entityName": "teacher",
          "schema": {
            "$ref": "#/backend/entities/Teacher"
          },
          "description": "Collection to store teacher profiles.",
          "params": [
            {
              "name": "teacherId",
              "description": "The unique identifier for the teacher."
            }
          ]
        }
      },
      {
        "path": "/courses/{courseId}",
        "definition": {
          "entityName": "course",
          "schema": {
            "$ref": "#/backend/entities/Course"
          },
          "description": "Collection to store course information.",
          "params": [
            {
              "name": "courseId",
              "description": "The unique identifier for the course."
            }
          ]
        }
      },
      {
        "path": "/grades/{gradeId}",
        "definition": {
          "entityName": "grade",
          "schema": {
            "$ref": "#/backend/entities/Grade"
          },
          "description": "Collection to store grade information.",
          "params": [
            {
              "name": "gradeId",
              "description": "The unique identifier for the grade."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore data structure is designed to support the school management application's features, focusing on student profiles, teacher profiles, course management, and grade submission/viewing. It leverages path-based ownership for private user data and subcollections for relationships. To ensure Authorization Independence, relevant authorization data (such as roles or membership) is denormalized into documents where necessary, avoiding `get()` calls in security rules. This allows atomic operations and easier debugging. Structural Segregation is applied to group data with similar access requirements into dedicated collections. QAPs (Rules are not Filters) is assured through path-based ownership and the absence of security rules that filter based on document content during list operations. Finally, Radical Consistency is maintained using semantic naming conventions. The structure supports the requested login page and add button functionality by providing clear paths for user and entity data, facilitating secure data creation and retrieval."
  }
}